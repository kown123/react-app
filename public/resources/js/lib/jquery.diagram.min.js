"use strict";!function(t){var i,a,e,o,n,s,d,r,l;t.fn.diagram=function(i,c){var h=t.extend({gap:-5,loop:!1,startdegree:0,fgcolor:"#03a5b0",bgcolor:"#999",stcolor:"#03a5b0",sgcolor:"#03a5b0",fill:!1,width:1,dimension:40,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null,timenum:1e3,bordersize:10},i);return this.each(function(){function c(i,a,e){t("<span></span>").appendTo(i).addClass(a).html(m).prepend(x).css({"line-height":e+"px","font-size":b.fontsize+"px"})}function p(i,a){t("<span></span>").appendTo(i).addClass("circle-info-half").css("line-height",b.dimension*a+"px").text(v)}function f(i){t.each(u,function(a,e){void 0!=i.data(e)?b[e]=i.data(e):b[e]=t(h).attr(e),"fill"==e&&void 0!=i.data("fill")&&(y=!0)})}var g,m,v,u=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border","startdegree","bordersize","gap","loop","stcolor","timenum","sgcolor"],b={},x="",I=0,P=t(this),y=!1;if(P.addClass("circliful"),f(P),void 0!=P.data("text")&&(m=P.data("text"),void 0!=P.data("icon")&&(x=t("<i></i>").addClass("fa "+t(this).data("icon")).css({color:b.iconcolor,"font-size":b.iconsize})),void 0!=P.data("type")?(D=t(this).data("type"),"half"==D?c(P,"circle-text-half",b.dimension/1.45):c(P,"circle-text",b.dimension)):c(P,"circle-text",b.dimension)),void 0!=t(this).data("total")&&void 0!=t(this).data("part")){var M=t(this).data("total")/100;g=(t(this).data("part")/M/100).toFixed(3),I=(t(this).data("part")/M).toFixed(3)}else void 0!=t(this).data("percent")?(g=t(this).data("percent")/100,I=t(this).data("percent")):g=h.percent/100;void 0!=t(this).data("info")&&(v=t(this).data("info"),void 0!=t(this).data("type")?(D=t(this).data("type"),"half"==D?p(P,.9):p(P,1.25)):p(P,1.25)),t(this).html("");var z=b.dimension,w=t("<canvas></canvas>").attr({width:z,height:z}).appendTo(t(this)).get(0),C=w.getContext("2d"),k=window.devicePixelRatio;if(k){var F=t(w);F.css("width",z),F.css("height",z),F.css("position","absolute"),F.css("left",b.gap),F.css("top",b.gap),F.attr("width",z*k),F.attr("height",z*k),C.scale(k,k)}var S=(t(w).parent(),z/2),T=z/2,W=360*b.percent,R=(W*(Math.PI/180),z/2.5),j=2.3*Math.PI,q=0;a=0===b.animationstep?I:0;var A=Math.max(b.animationstep,0),Q=2*Math.PI,B=Math.PI/2,D="",E=!0,G=b.startdegree/180*Math.PI;n=b.loop,o=b.timenum,s=b.bgcolor,d=b.fgcolor,r=b.fgcolor,l=b.bgcolor,void 0!=t(this).data("type")&&(D=t(this).data("type"),"half"==D&&(j=2*Math.PI,q=3.13,Q=Math.PI,B=Math.PI/.996)),void 0!=t(this).data("type")&&(D=t(this).data("type"),"angle"==D&&(j=2.25*Math.PI,q=2.4,Q=1.53+Math.PI,B=.73+Math.PI/.996)),(e=function(e){C.clearRect(0,0,w.width,w.height),C.beginPath(),C.arc(S,T,R,q,j,!1),C.lineWidth=b.width+1,C.strokeStyle=l,C.stroke(),y&&(C.fillStyle=b.fill,C.fill()),C.beginPath(),C.arc(S,T,R,-B+G,Q*e-B+G,!1),"outline"==b.border?C.lineWidth=b.width+b.bordersize:"inline"==b.border&&(C.lineWidth=b.width-b.bordersize),C.strokeStyle=d,C.stroke(),I>a&&(a+=A,requestAnimationFrame(function(){animate(Math.min(a,I)/100)},P)),a==I&&E&&"undefined"!=typeof i&&t.isFunction(i.complete)&&(i.complete(),E=!1)})(a/100)})},t.fn.diagram.start=function(){clearInterval(i),a=0,i=setInterval(function(){a++,e(a/300),300==a&&(n?(a=0,d==r?(d=s,l=r):(d=r,l=s)):clearInterval(i))},o)},t.fn.diagram.stop=function(){clearInterval(i)}}(jQuery);